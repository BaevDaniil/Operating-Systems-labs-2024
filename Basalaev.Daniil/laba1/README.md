# Проект: Demon

## Описание

Это проект демон-процесса, написанного на C++, который с помощью `fork()` создаёт фоновой процесс. Демон периодически мониторит содержимое одной или двух папок, указанных в конфигурационном файле, и записывает их содержимое в лог-файл `hist.log`. Интервал между действиями также задаётся в конфигурационном файле.

### Функциональные возможности:
- Демон запоминает абсолютный путь к конфигурационному файлу.
- Поддерживает работу с сигналами:
  - По сигналу `SIGHUP` перечитывается конфигурационный файл.
  - По сигналу `SIGTERM` демон завершает работу и регистрирует это в системном журнале.
- Демон защищён от повторного запуска с использованием PID-файла.
- Логирование ошибок и информации происходит с помощью системного журнала (syslog).

## Требования

- **CMake** (для сборки проекта)
- **GCC** или любой другой компилятор, поддерживающий C++
- **Catch2** (для юнит-тестов)
  
Убедитесь, что у вас установлены все необходимые библиотеки и утилиты для сборки и работы проекта.

## Сборка

1. **Клонируйте репозиторий:**
   ```bash
   git clone https://github.com/11AgReS1SoR11/OS.git
2. **Запустите скрипт сборки:**
   ```bash
   bash build.sh

## Конфигурация

Для настройки демона необходимо создать конфигурационный файл, в котором будут указаны две директории и интервал между действиями (в секундах).

Пример конфигурационного файла находится в проекте (Demon/config.txt):
```txt
/home/daniil/Desktop/test1
/home/daniil/Desktop/test2
30
```

test1 — папка, содержимое которой будет отслеживаться.
test2 — папка, в которой будет создан файл hist.log для записи истории содержимого папки test1.
30 — интервал между действиями (в секундах).
Конфигурационный файл можно разместить в любом месте. При первом запуске демон запоминает его абсолютный путь для дальнейшего использования.

## Запуск демона

1. **Запустите демона с использованием скрипта:**
   ```bash
   bash runDemon
2. **Убедитесь, что демон работает:**
   ```bash
   bash isDemonRunning

## Управление демоном

1. **Остановите демона с помощью сигнала SIGTERM:**
   ```bash
   bash killDemon
2. **Перечитывание конфигурационного файла:**
   ```bash
   bash reconfigDemon
3. **Перечитывание конфигурационного файла:**
   ```bash
   bash demonLogs

## Тестирование

Скрипт для запуска юнит-тестов:
```bash
bash runTest
```

## Автор
Студент: Басалаев Даниил Александрович 5030102/10201
